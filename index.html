<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>åŠæ–¤</title>
  
    <link rel="icon" href="/assets/github.svg">
  
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  
<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">

  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url(/assets/header.png)">
        <div class='av-pic' style="background-image: url(/assets/tree_small.png)">
        </div>
    </section>
    <section class='menu'>
        <div>åŠæ–¤</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
            <a href="/tags/" class="Btn">
              <li>Tags</li>
            </a>  
          
            <a href="/about/" class="Btn">
              <li>About</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <ul class="Index">
  
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/10/10/BOOKS-NOTE/">BOOKS NOTE</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-10-10T07:40:16.000Z" itemprop="datePublished">
    2021-10-10
  </time>
  
  
</div>

    </header>
    <div>
      
        <h1 id="BOOKS-NOTE"><a href="#BOOKS-NOTE" class="headerlink" title="BOOKS NOTE"></a>BOOKS NOTE</h1><hr>

<h3 id="ã€ŠåŒå­æ˜Ÿã€‹"><a href="#ã€ŠåŒå­æ˜Ÿã€‹" class="headerlink" title="ã€ŠåŒå­æ˜Ÿã€‹"></a>ã€ŠåŒå­æ˜Ÿã€‹</h3><pre><code>        -- ä¼Šå‚å¹¸å¤ªéƒã€æ—¥ã€‘ è‘—
</code></pre>
<blockquote>
<p>&ensp;&ensp;&ensp;&ensp;å¤§å©¶ç¼“ç¼“è½¬è¿‡å¤´æ¥ï¼Œæ·±æ·±å¹äº†å£æ°”ï¼šâ€œä¼˜æˆ‘ï¼Œä½ è„‘å­å¥½ä½¿ï¼Œè‚¯å®šä¹ŸçŸ¥é“å€Ÿé’±æœ¬èº«æ ¹æœ¬ä¸æ˜¯é—®é¢˜ã€‚æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œè°ˆé’±éœ€è¦ç›¸åº”çš„è§‰æ‚Ÿï¼Œå®ƒæœ‰å¯èƒ½ç ´åæˆ‘è·Ÿä½ ä»¬ä¹‹é—´çš„å…³ç³»ã€‚ä½ ä»¬æ˜ç™½è¿™ä¸€ç‚¹ï¼Œå´è¿˜æƒ³æ‰¾æˆ‘å€Ÿé’±ï¼Œè¿™è®©æˆ‘å¿ƒé‡Œä¸æ˜¯æ»‹å‘³å‘€ã€‚å€Ÿé’±å€’æ˜¯æ²¡ä»€ä¹ˆã€‚â€<br>&ensp;&ensp;&ensp;&ensp;æˆ‘å’Œé£æˆ‘æ·±æ·±åœ°ä½ä¸‹äº†å¤´ã€‚<br>&ensp;&ensp;&ensp;&ensp;å†å¤šå¾—è¾©è§£å’Œæ­‰æ„éƒ½æ²¡æœ‰æ„ä¹‰äº†ã€‚<br>&ensp;&ensp;&ensp;&ensp;æˆ–è®¸æˆ‘ä»¬å’Œå¤§å©¶çš„å…³ç³»ä¼šå› æ­¤ç”Ÿéš™ï¼Œä½†æ€»æœ‰ä¸€å¤©è£‚ç—•ä¼šä¿®å¤ï¼Œæˆ‘ä»¬ä¼šå¼¥è¡¥å¥¹çš„ã€‚<br>&ensp;&ensp;&ensp;&ensp;æˆ‘è®¤ä¸ºè¿™æ ·ï¼Œé£æˆ‘è‚¯å®šä¹Ÿä¸€æ ·ã€‚<br>&ensp;&ensp;&ensp;&ensp;æœ€ç»ˆå€Ÿäº†ä¸¤ç™¾ä¸‡æ—¥å…ƒã€‚<br>&ensp;&ensp;&ensp;&ensp;æ‘èµ·æ¥ä¹Ÿæ²¡æœ‰å¤šåšï¼Œç”šè‡³æœ‰äº›å«äººå¤±æœ›ã€‚</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ğŸ˜  æˆ‘ä¹Ÿä¼šè¿™ä¹ˆè§‰å¾—ã€‚&lt; 2021-10-10 16:01 &gt;</span></span><br></pre></td></tr></table></figure>

<hr>
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/10/07/laravel%E4%BD%BF%E7%94%A8Casbin%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BARBAC/">laravelä½¿ç”¨Casbinå¿«é€Ÿæ­å»ºRBAC</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-10-07T08:46:27.000Z" itemprop="datePublished">
    2021-10-07
  </time>
  
  
</div>

    </header>
    <div>
      
        <h1 id="laravelä½¿ç”¨Casbinå¿«é€Ÿæ­å»ºRBAC"><a href="#laravelä½¿ç”¨Casbinå¿«é€Ÿæ­å»ºRBAC" class="headerlink" title="laravelä½¿ç”¨Casbinå¿«é€Ÿæ­å»ºRBAC"></a>laravelä½¿ç”¨Casbinå¿«é€Ÿæ­å»ºRBAC</h1><p>githubåœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/php-casbin/laravel-authz">https://github.com/php-casbin/laravel-authz</a></p>
<p>laravel é¡¹ç›®å®‰è£…</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">composer require casbin/laravel-authz</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ æœåŠ¡æä¾›è€…</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// config/app.php</span><br><span class="line">&#x27;providers&#x27; =&gt; [</span><br><span class="line">    /*</span><br><span class="line">     * Package Service Providers...</span><br><span class="line">     */</span><br><span class="line">    Lauthz\LauthzServiceProvider::class,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">&#x27;aliases&#x27; =&gt; [</span><br><span class="line">    // ...</span><br><span class="line">    &#x27;Enforcer&#x27; =&gt; Lauthz\Facades\Enforcer::class,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>å‘å¸ƒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">php artisan vendor:publish</span><br><span class="line"></span><br><span class="line">// å¼¹å‡ºé€‰é¡¹</span><br><span class="line">Which provider or tag&#x27;s files would you like to publish?:</span><br><span class="line">  [0 ] Publish files from all providers and tags listed below</span><br><span class="line">  [1 ] Provider: BeyondCode\DumpServer\DumpServerServiceProvider</span><br><span class="line">  [2 ] Provider: Fideloper\Proxy\TrustedProxyServiceProvider</span><br><span class="line">  [3 ] Provider: Illuminate\Foundation\Providers\FoundationServiceProvider</span><br><span class="line">  [4 ] Provider: Illuminate\Mail\MailServiceProvider</span><br><span class="line">  [5 ] Provider: Illuminate\Notifications\NotificationServiceProvider</span><br><span class="line">  [6 ] Provider: Illuminate\Pagination\PaginationServiceProvider</span><br><span class="line">  [7 ] Provider: Laravel\Tinker\TinkerServiceProvider</span><br><span class="line">  [8 ] Provider: Lauthz\LauthzServiceProvider</span><br><span class="line">  [9 ] Provider: Tymon\JWTAuth\Providers\LaravelServiceProvider</span><br><span class="line">  [10] Tag: config</span><br><span class="line">  [11] Tag: laravel-errors</span><br><span class="line">  [12] Tag: laravel-lauthz-config</span><br><span class="line">  [13] Tag: laravel-lauthz-migrations</span><br><span class="line">  [14] Tag: laravel-mail</span><br><span class="line">  [15] Tag: laravel-notifications</span><br><span class="line">  [16] Tag: laravel-pagination</span><br><span class="line"> &gt; 12</span><br><span class="line"></span><br><span class="line">// è¾“å…¥12ï¼Œç”Ÿæˆé…ç½®</span><br><span class="line">Copied File [/vendor/casbin/laravel-authz/config/lauthz-rbac-model.conf] To [/config/lauthz-rbac-model.conf]</span><br><span class="line">Copied File [/vendor/casbin/laravel-authz/config/lauthz.php] To [/config/lauthz.php]</span><br><span class="line">Publishing complete.</span><br><span class="line"></span><br><span class="line">// å†æ¬¡æ“ä½œï¼Œè¾“å…¥13ï¼Œç”Ÿæˆè¿ç§»æ•°æ®æ–‡ä»¶</span><br><span class="line">Copied Directory [/vendor/casbin/laravel-authz/database/migrations] To [/database/migrations]</span><br><span class="line">Publishing complete.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿ç§»æ•°æ®åˆ›å»ºä¸€ä¸ªåä¸º rules çš„æ–°è¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">php artisan migrate</span><br></pre></td></tr></table></figure>

<h4 id="ç”¨æ³•-Enforcer-Api"><a href="#ç”¨æ³•-Enforcer-Api" class="headerlink" title="ç”¨æ³• Enforcer Api"></a>ç”¨æ³• Enforcer Api</h4><p>è·å–æ‰€æœ‰è§’è‰²</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Enforcer::getAllRoles(); // [&#x27;writer&#x27;, &#x27;reader&#x27;]</span><br></pre></td></tr></table></figure>

<p>è·å–ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Enforcer::getRolesForUser(&#x27;eve&#x27;); // [&#x27;writer&#x27;]</span><br></pre></td></tr></table></figure>


      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/10/04/laravel-api-init/">laravel-api-init</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-10-04T02:51:46.000Z" itemprop="datePublished">
    2021-10-04
  </time>
  
  
</div>

    </header>
    <div>
      
        <h1 id="Laravel-api-init"><a href="#Laravel-api-init" class="headerlink" title="Laravel-api-init"></a>Laravel-api-init</h1><blockquote>
<p>ä½¿ç”¨auth-jwtï¼Œå®‰è£… <a target="_blank" rel="noopener" href="https://jwt-auth.readthedocs.io/en/develop/laravel-installation/">https://jwt-auth.readthedocs.io/en/develop/laravel-installation/</a></p>
</blockquote>
<p>è¯·æ±‚meæ¥å£æ—¶æŠ¥é”™,é‡å®šå‘åˆ°loginè·¯ç”±æ—¶æ‰¾ä¸åˆ°ï¼ˆå› ä¸ºåªåšapi,è·¯ç”±æ‰¾çš„æ˜¯webçš„ç™»å½•é¡µï¼‰ï¼Œå¯ä»¥é‡å†™è·¯ç”±ï¼Œæç¤ºæƒé™éªŒè¯æœ‰è¯¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># App\Http\Middleware\Authenticate</span><br><span class="line">protected function redirectTo($request)</span><br><span class="line">&#123;</span><br><span class="line">    if (!$request-&gt;expectsJson()) &#123;</span><br><span class="line">        return route(&#x27;re-login&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># routerè¿™æ ·å†™</span><br><span class="line">Route::get(&#x27;re-login&#x27;,&#x27;APi\UserController@re_login&#x27;)-&gt;name(&#x27;re-login&#x27;); //æ ¡éªŒå¤±è´¥ï¼Œé‡æ–°ç™»å½•</span><br><span class="line"></span><br><span class="line"># æç¤ºæ–¹æ³•</span><br><span class="line">public function re_login()</span><br><span class="line">&#123;</span><br><span class="line">    return response()-&gt;json([&#x27;msg&#x27; =&gt; &#x27;éªŒè¯è¿‡æœŸæˆ–æœ‰è¯¯ï¼Œè¯·é‡æ–°ç™»å½•&#x27;]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æµ‹è¯•å·¥å…·ä½¿ç”¨Apifox <a target="_blank" rel="noopener" href="https://www.apifox.cn/help/#%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86%E7%8E%B0%E7%8A%B6">https://www.apifox.cn/help/#%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86%E7%8E%B0%E7%8A%B6</a> , ç”¨postmanä¹Ÿæ˜¯ä¸€æ ·çš„</p>
</blockquote>
<h4 id="OAuth2-0"><a href="#OAuth2-0" class="headerlink" title="OAuth2.0"></a>OAuth2.0</h4><ul>
<li>æˆæƒç <br>  ç¬¬ä¸‰æ–¹åº”ç”¨å…ˆè·å–æˆæƒç ï¼Œå†ç”¨æˆæƒç å»è·å–ä»¤ç‰Œã€‚</li>
<li>éšè—å¼<br>  æ²¡æœ‰åç«¯çš„çº¯å‰ç«¯é¡¹ç›®ï¼Œç›´æ¥è¯·æ±‚è·å–ä»¤ç‰Œï¼Œä»¤ç‰Œå‘é€æ˜¯ä»¥é”šç‚¹çš„æ–¹å¼å¸¦è¿‡æ¥çš„ï¼Œå› ä¸ºhttpåè®®å¯èƒ½é­åˆ°ä¸­é—´äººæ”»å‡»ã€‚</li>
<li>å¯†ç å¼<br>  é«˜åº¦ä¿¡ä»»æŸä¸ªåº”ç”¨ï¼Œç›´æ¥è¦æ±‚ç”¨æˆ·æä¾›è´¦æˆ·å¯†ç ï¼Œæ‹¿åˆ°å¸å¯†åå°±ç›´æ¥è¯·æ±‚ä»¤ç‰Œã€‚</li>
<li>å‡­è¯å¼<br>  é€‚ç”¨äºæ²¡æœ‰å‰ç«¯çš„å‘½ä»¤è¡Œåº”ç”¨ã€‚ç›´æ¥æ‹¿å‡­è¯è¯·æ±‚ï¼ŒéªŒè¯é€šè¿‡åç«‹å³è¿”å›ä»¤ç‰Œã€‚è¿™ç§æ–¹å¼ç»™å‡ºçš„ä»¤ç‰Œï¼Œæ˜¯é’ˆå¯¹ç¬¬ä¸‰æ–¹åº”ç”¨çš„ï¼Œè€Œä¸æ˜¯é’ˆå¯¹ç”¨æˆ·çš„ï¼Œå³æœ‰å¯èƒ½å¤šä¸ªç”¨æˆ·å…±äº«åŒä¸€ä¸ªä»¤ç‰Œã€‚</li>
</ul>
<h3 id="Laravel-Apiè¡¨å•éªŒè¯å¤±è´¥è¢«é‡å®šå‘åˆ°ä¸»é¡µ"><a href="#Laravel-Apiè¡¨å•éªŒè¯å¤±è´¥è¢«é‡å®šå‘åˆ°ä¸»é¡µ" class="headerlink" title="Laravel Apiè¡¨å•éªŒè¯å¤±è´¥è¢«é‡å®šå‘åˆ°ä¸»é¡µ"></a>Laravel Apiè¡¨å•éªŒè¯å¤±è´¥è¢«é‡å®šå‘åˆ°ä¸»é¡µ</h3><p>æŸ¥çœ‹fromrequestæºç ï¼Œæœ‰ä¸€ä¸ªæ–¹æ³•failedValidationï¼Œå¤±è´¥åä¼šé‡å®šå‘åˆ°æŒ‡å®šè·¯ç”±ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line">* Handle a failed validation attempt.</span><br><span class="line">*</span><br><span class="line">* @param  \Illuminate\Contracts\Validation\Validator  $validator</span><br><span class="line">* @return void</span><br><span class="line">*</span><br><span class="line">* @throws \Illuminate\Validation\ValidationException</span><br><span class="line">*/</span><br><span class="line">protected function failedValidation(Validator $validator)</span><br><span class="line">&#123;</span><br><span class="line">    throw (new ValidationException($validator))</span><br><span class="line">                -&gt;errorBag($this-&gt;errorBag)</span><br><span class="line">                -&gt;redirectTo($this-&gt;getRedirectUrl());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥æŠŠå®ƒé‡å†™æˆè¿”å›æŒ‡å®šçš„jsonä¸²ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">protected function failedValidation(Validator $validator)</span><br><span class="line">&#123;</span><br><span class="line">    $validator = new ValidationException($validator);</span><br><span class="line">    throw new HttpResponseException(response()-&gt;json([</span><br><span class="line">        &#x27;message&#x27; =&gt; $validator-&gt;getMessage(),</span><br><span class="line">        &#x27;error&#x27; =&gt; $validator-&gt;errors()</span><br><span class="line">    ], JsonResponse::HTTP_UNPROCESSABLE_ENTITY));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    // é‡å†™éªŒè¯å¤±è´¥ è¿”å›é”™è¯¯ä¿¡æ¯ï¼ˆæœ¬æ¥æ˜¯è·³è½¬æŒ‡å®šè·¯ç”±</span><br><span class="line">    protected function failedValidation(Validator $validator)</span><br><span class="line">    &#123;</span><br><span class="line">        // 422 Unprocessable Entity è¯·æ±‚æ ¼å¼æ­£ç¡®ï¼Œä½†æ˜¯ç”±äºå«æœ‰è¯­ä¹‰é”™è¯¯ï¼Œæ— æ³•å“åº”ã€‚</span><br><span class="line">        $validator = new ValidationException($validator);</span><br><span class="line">//        throw new HttpResponseException(response()-&gt;json([</span><br><span class="line">//            &#x27;message&#x27; =&gt; $validator-&gt;getMessage(),</span><br><span class="line">//            &#x27;error&#x27; =&gt; $validator-&gt;errors()</span><br><span class="line">//        ], JsonResponse::HTTP_UNPROCESSABLE_ENTITY));</span><br><span class="line">        $message = array_values(array_map(&#x27;reset&#x27;, objToArr($validator-&gt;errors())))[0] ?? $validator-&gt;getMessage();</span><br><span class="line">        $response_arr = $this-&gt;failed($message, $validator-&gt;status);</span><br><span class="line">        throw new HttpResponseException($response_arr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Laravel-æ·»åŠ å…¬å…±å‡½æ•°"><a href="#Laravel-æ·»åŠ å…¬å…±å‡½æ•°" class="headerlink" title="Laravel æ·»åŠ å…¬å…±å‡½æ•°"></a>Laravel æ·»åŠ å…¬å…±å‡½æ•°</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/crazytata/p/10135841.html">https://www.cnblogs.com/crazytata/p/10135841.html</a></p>
</blockquote>
<h4 id="Laravel-å¯¹è±¡è½¬æ•°ç»„"><a href="#Laravel-å¯¹è±¡è½¬æ•°ç»„" class="headerlink" title="Laravel å¯¹è±¡è½¬æ•°ç»„"></a>Laravel å¯¹è±¡è½¬æ•°ç»„</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">toArray() ä¹‹å</span><br><span class="line">array_map (&#x27;get_object_vars&#x27;, $results); </span><br><span class="line">// or</span><br><span class="line">json_decode(json_encode($array,true),true)</span><br></pre></td></tr></table></figure>

<h4 id="è·å–ä¸€ç»„æ•°ç»„æ•°æ®çš„å¤´æˆ–ç»“å°¾åˆ—"><a href="#è·å–ä¸€ç»„æ•°ç»„æ•°æ®çš„å¤´æˆ–ç»“å°¾åˆ—" class="headerlink" title="è·å–ä¸€ç»„æ•°ç»„æ•°æ®çš„å¤´æˆ–ç»“å°¾åˆ—"></a>è·å–ä¸€ç»„æ•°ç»„æ•°æ®çš„å¤´æˆ–ç»“å°¾åˆ—</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$arr2 = array_map(&#x27;reset&#x27;,$arr);</span><br><span class="line">$arr2 = array_map(&#x27;end&#x27;,$arr);</span><br></pre></td></tr></table></figure>
<h4 id="Laravel-api-è®¿é—®é¢‘ç‡é™åˆ¶-429-Too-many-requests"><a href="#Laravel-api-è®¿é—®é¢‘ç‡é™åˆ¶-429-Too-many-requests" class="headerlink" title="Laravel api è®¿é—®é¢‘ç‡é™åˆ¶ 429 Too many requests"></a>Laravel api è®¿é—®é¢‘ç‡é™åˆ¶ 429 Too many requests</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// é…ç½®åœ¨ Laravel é¡¹ç›®æ–‡ä»¶ app/Http/Kernel.php</span><br><span class="line">&#x27;api&#x27; =&gt; [</span><br><span class="line">    &#x27;throttle:60,1&#x27;,</span><br><span class="line">    &#x27;bindings&#x27;,Â·</span><br><span class="line">],</span><br><span class="line">/*</span><br><span class="line">ç¬¬ä¸€ä¸ªå‚æ•° 60 ä»£è¡¨æ¯åˆ†é’Ÿé™åˆ¶ 60 æ¬¡è¯·æ±‚</span><br><span class="line">ç¬¬äºŒä¸ªå‚æ•° 1 ä»£è¡¨è§¦å‘äº†é™åˆ¶è§„åˆ™ï¼Œåˆ™1åˆ†é’Ÿå†…ç¦æ­¢è®¿é—®</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h4 id="è§£å†³å¹¶å‘è¯·æ±‚-token-å¤±æ•ˆçš„é—®é¢˜Â·Â·Â·Â·Â·Â·Â·"><a href="#è§£å†³å¹¶å‘è¯·æ±‚-token-å¤±æ•ˆçš„é—®é¢˜Â·Â·Â·Â·Â·Â·Â·" class="headerlink" title="è§£å†³å¹¶å‘è¯·æ±‚ token å¤±æ•ˆçš„é—®é¢˜Â·Â·Â·Â·Â·Â·Â·"></a>è§£å†³å¹¶å‘è¯·æ±‚ token å¤±æ•ˆçš„é—®é¢˜Â·Â·Â·Â·Â·Â·Â·</h4><blockquote>
<p>é…ç½® blacklist_grace_period å‚æ•°ï¼Œå…è®¸è¿‡æœŸ token åœ¨ä¸€å®šæ—¶é—´å†…è®¿é—®Â·</p>
</blockquote>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/08/13/go%E6%8A%A5%E9%94%99%E5%8E%9F%E5%9B%A0/">goæŠ¥é”™åŸå› </a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-08-13T08:26:51.000Z" itemprop="datePublished">
    2021-08-13
  </time>
  
  
</div>

    </header>
    <div>
      
        <h2 id="goæŠ¥é”™åŸå› "><a href="#goæŠ¥é”™åŸå› " class="headerlink" title="goæŠ¥é”™åŸå› "></a>goæŠ¥é”™åŸå› </h2><ul>
<li><p><code>no result values expected</code><br>  å‡½æ•°æ²¡æœ‰å†™è¿”å›å€¼ï¼Œå´è¿›è¡Œäº†return</p>
</li>
<li><p><code>undeclared name: xx</code><br>  ä¸ºå®šä¹‰çš„å˜é‡åï¼Œæ³¨æ„å®šä¹‰æ—¶çš„ : æœ‰æ²¡æœ‰å†™</p>
</li>
</ul>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/08/04/go%E5%88%87%E7%89%87%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9/">goåˆ‡ç‰‡éœ€è¦æ³¨æ„çš„åœ°æ–¹</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-08-04T02:55:22.000Z" itemprop="datePublished">
    2021-08-04
  </time>
  
  
</div>

    </header>
    <div>
      
        <h3 id="æœ‰å…³äºåˆ‡ç‰‡slice"><a href="#æœ‰å…³äºåˆ‡ç‰‡slice" class="headerlink" title="æœ‰å…³äºåˆ‡ç‰‡slice"></a>æœ‰å…³äºåˆ‡ç‰‡slice</h3><ul>
<li>åœ¨goè¯­è¨€ä¸­ï¼Œæ•°ç»„å…¶å®æ˜¯ä¸ç»å¸¸ä½¿ç”¨çš„ï¼Œå› ä¸ºå®ƒåœ¨å‡½æ•°ä¼ å‚æ—¶é»˜è®¤ä½¿ç”¨çš„æ˜¯å€¼ä¼ é€’ï¼ˆå¤åˆ¶æœ¬èº«çš„å€¼å†ä¼ é€’ç»™å‡½æ•°å†…ï¼Œè‹¥æ˜¯è¿™ä¸ªæ•°ç»„éå¸¸å¤§ï¼Œå°†ä¼šååˆ†æ¶ˆè€—å†…å­˜èµ„æºï¼Œä¸”åœ¨å‡½æ•°å†…å¯¹æ•°ç»„åšå‡ºçš„æ”¹å˜ä¸ä¼šå½±å“åˆ°æ•°ç»„æ•°æ®æœ¬èº«ï¼‰ï¼›ç»å¸¸ä½¿ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œå°±æ˜¯sliceã€‚</li>
</ul>
<ul>
<li><p>å…¶sliceåœ¨ä½œä¸ºå‡½æ•°å‚æ•°æ—¶æ˜¯å¼•ç”¨ä¼ é€’ï¼Œåœ¨å‡½æ•°å†…å¯¹å…¶åšçš„æ“ä½œä¼šå½±å“åˆ°æ•°æ®æœ¬èº«ã€‚</p>
</li>
<li><p>sliceçš„å–å€¼æ“ä½œéµå¾ªåŠå°é—­åŸåˆ™ï¼Œæ¯”å¦‚å–å€¼<code>[2:6]</code>ï¼Œå–2çš„æ•°æ®ï¼Œç¬¬5ä¸ªå–å®Œå°±åœæ­¢äº†ï¼Œä¸ä¼šå–6çš„æ•°æ®ã€‚</p>
</li>
</ul>
<p><strong><code>sliceæœ¬èº«æ˜¯æ²¡æœ‰æ•°æ®çš„ï¼Œåº•å±‚æ˜¯å¯¹æ•°ç»„çš„ä¸€ä¸ªviewï¼ˆè§†å›¾ï¼‰</code></strong></p>
<ul>
<li>æ•°ç»„æƒ³è¦ä¼ é€’åˆ°å‚æ•°æ˜¯åˆ‡ç‰‡çš„å‡½æ•°ï¼Œå¯ä»¥è¿™ä¹ˆå†™<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    arr := [...]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">    updateArray(arr[:])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">updateArray</span><span class="params">(a []<span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    <span class="comment">// to do ......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
è¿™æ ·å½“ä½ åœ¨å‡½æ•°å†…ä¿®æ”¹æ•°ç»„çš„æ•°æ®æ—¶ï¼Œæ•°ç»„æœ¬èº«çš„æ•°æ®ä¹Ÿä¼šè·Ÿç€æ”¹å˜</li>
</ul>
<h3 id="slice-çš„æ‰©å±•"><a href="#slice-çš„æ‰©å±•" class="headerlink" title="slice çš„æ‰©å±•"></a>slice çš„æ‰©å±•</h3><p>å…ˆçœ‹ä¾‹å­</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">arr := [...]<span class="keyword">int</span>&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>&#125;</span><br><span class="line">s1 := arr[<span class="number">2</span>:<span class="number">6</span>]</span><br><span class="line">s2 := s1[<span class="number">3</span>:<span class="number">5</span>]</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œè¯·é—®s1,s2çš„å€¼åˆ†åˆ«æ˜¯å¤šå°‘?<br>åœ¨s1ä¸­åªæœ‰4ä¸ªæ•°å€¼ï¼Œæ ¹æœ¬ä¸æ»¡è¶³5çš„ä¸‹æ ‡å–å€¼ï¼ŒæŒ‰ç†è¯´s2çš„å–å€¼åº”è¯¥ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ç¡®å®èƒ½å¤Ÿå–åˆ°ï¼Œæ‰“å°å‡ºæ¥å¦‚ä¸‹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">s1= [<span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>]</span><br><span class="line">s2= [<span class="number">5</span> <span class="number">6</span>]</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå•ç‹¬å–5<code>s2[5]</code>ä¼šæŠ¥é”™</p>
<p>å› ä¸ºsliceçš„æ•°æ®ç»“æ„æ˜¯ç”±ptr(æŒ‡é’ˆ)ï¼Œlenï¼ˆé•¿åº¦ï¼‰ï¼Œcapï¼ˆå®¹é‡ï¼‰ç»„æˆçš„ï¼Œå½“å®ƒå»æ‰å‰é¢çš„ä¸‹æ ‡åï¼Œä¼šæ‰©å±•ä½™ä¸‹çš„å†…å®¹ï¼Œä½†æ˜¯ä¸ä¼šå±•ç¤ºå‡ºæ¥ï¼Œå½“ä½ ç”¨åˆ‡ç‰‡å–å€¼è¶…å‡ºlençš„é•¿åº¦çš„æ—¶å€™å®ƒä¼šè‡ªè¡Œåˆ¤æ–­æ˜¯å¦ç”±è¶³å¤Ÿçš„å®¹é‡è¿˜å­˜ç€å…¶ä»–çš„å€¼ï¼Œè‹¥æ˜¯æœ‰å°±ä¼šè¿”å›å‡ºæ¥ã€‚è¿™ä¸ªå°±æ˜¯å®ƒçš„æ‰©å±•æ€§ï¼Œæ³¨æ„å®ƒåªèƒ½æ‰©å±•åé¢çš„ï¼Œä¸èƒ½æ‰©å±•å‰é¢çš„ï¼Œä¸”æ‰©å±•çš„æ•°ç»„ä¸èƒ½è¶…è¿‡å®¹é‡ã€‚</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/08/04/go%E4%B8%A4%E4%B8%AA%E6%95%B0%E5%80%BC%E4%BA%A4%E6%8D%A2/">goä¸¤ä¸ªæ•°å€¼äº¤æ¢</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-08-03T16:10:10.000Z" itemprop="datePublished">
    2021-08-04
  </time>
  
  
</div>

    </header>
    <div>
      
        <p>å…³äºgoä¸¤ä¸ªæ•°å€¼äº¤æ¢ï¼Œç¬¬ä¸€ä¸ªæƒ³åˆ°çš„åº”è¯¥æ˜¯ä½¿ç”¨æŒ‡é’ˆçš„æ–¹å¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    a,b:=<span class="number">3</span>,<span class="number">4</span></span><br><span class="line">    swap(&amp;a,&amp;b)</span><br><span class="line">    fmt.Println(a,b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a,b *<span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    *a,*b = *b,*a</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥å€ŸåŠ©ä¸­é—´å˜é‡æ¥ä½œäº¤æ¢</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    a,b:=<span class="number">3</span>,<span class="number">4</span></span><br><span class="line">    swap(&amp;a,&amp;b)</span><br><span class="line">    fmt.Println(a,b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a,b *<span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    tmp := *a</span><br><span class="line">	*a = *b</span><br><span class="line">	*b = tmp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥ä¸ç”¨åˆ°æŒ‡é’ˆä¹Ÿèƒ½äº¤æ¢ï¼›ä¸è¿‡è¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹éœ€è¦æœ‰è¿”å›å€¼ï¼Œå’Œéœ€è¦å–æ¥å—è¿”å›å€¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a, b := <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">	swap(a, b)</span><br><span class="line">	fmt.Println(a, b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> b, a</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/07/27/failed/">gitå…‹éš†rpc failed</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-07-27T05:06:05.000Z" itemprop="datePublished">
    2021-07-27
  </time>
  
  
</div>

    </header>
    <div>
      
        <h1 id="git-å…‹éš†æŠ¥é”™-error-RPC-failed"><a href="#git-å…‹éš†æŠ¥é”™-error-RPC-failed" class="headerlink" title="git å…‹éš†æŠ¥é”™ error: RPC failed"></a>git å…‹éš†æŠ¥é”™ error: RPC failed</h1><p><code>git config --global http.sslVerify false</code></p>
<hr>
<p><code>git config --list </code></p>
<p>çœ‹ <code>http.postbuffer</code> å‚æ•°æ˜¯å¦è®¾ç½®ï¼Œå¯ä»¥è®¾ç½®ä¸º 5242880000</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git config --global http.postBuffer 5242880000</span><br></pre></td></tr></table></figure>
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/07/26/go%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/">goä¾èµ–ç®¡ç†å·¥å…·</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-07-26T02:05:54.000Z" itemprop="datePublished">
    2021-07-26
  </time>
  
  
</div>

    </header>
    <div>
      
        <h1 id="glide"><a href="#glide" class="headerlink" title="glide"></a>glide</h1><h3 id="goä¾èµ–åŒ…ç®¡ç†å·¥å…·-glide"><a href="#goä¾èµ–åŒ…ç®¡ç†å·¥å…·-glide" class="headerlink" title="goä¾èµ–åŒ…ç®¡ç†å·¥å…· glide"></a>goä¾èµ–åŒ…ç®¡ç†å·¥å…· glide</h3><p><a target="_blank" rel="noopener" href="https://glidedocs.readthedocs.io/zh/latest/">glideä¸­æ–‡æ–‡æ¡£</a></p>
<p>glide.yaml å®Œæ•´é…ç½®ç¤ºä¾‹</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">package:</span> <span class="string">foor</span></span><br><span class="line"><span class="attr">homepage:</span> <span class="string">https://github.com/qiangmzsx</span></span><br><span class="line"><span class="attr">license:</span> <span class="string">MIT</span></span><br><span class="line"><span class="attr">owners:</span> </span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">qiangmzsx</span></span><br><span class="line">  <span class="attr">email:</span> <span class="string">qiangmzsx@hotmail.com</span></span><br><span class="line">  <span class="attr">homepage:</span> <span class="string">https://github.com/qiangmzsx</span></span><br><span class="line"><span class="comment"># å»é™¤åŒ…</span></span><br><span class="line"><span class="attr">ignore:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">appengine</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">golang.org/x/net</span></span><br><span class="line"><span class="comment"># æ’é™¤ç›®å½•</span></span><br><span class="line"><span class="attr">excludeDirs:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">node_modules</span></span><br><span class="line"><span class="comment"># å¯¼å…¥åŒ…</span></span><br><span class="line"><span class="attr">import:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">package:</span> <span class="string">github.com/astaxie/beego</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">1.8</span><span class="number">.0</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">package:</span> <span class="string">github.com/coocood/freecache</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">package:</span> <span class="string">github.com/garyburd/redigo/redis</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">package:</span> <span class="string">github.com/go-sql-driver/mysql</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">package:</span> <span class="string">github.com/bitly/go-simplejson</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">package:</span> <span class="string">git.oschina.net/qiangmzsx/beegofreecache</span></span><br><span class="line"><span class="attr">testImport:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">package:</span> <span class="string">github.com/smartystreets/goconvey</span></span><br><span class="line">  <span class="attr">subpackages:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">convey</span></span><br></pre></td></tr></table></figure>

<p>glideæ¸…é™¤ç¼“å­˜ <code>glide cc</code><br>glideæ›´æ–° <code>glide up</code></p>
<ul>
<li>ä¿®æ”¹yamlæ–‡ä»¶æ·»åŠ åŒ…ï¼Œ <code>glide up</code></li>
<li>ä½¿ç”¨<code>glide get github.com/user/projiect</code>å‘½ä»¤æ¥æ·»åŠ ä¾èµ–åŒ…</li>
<li>å½“æœ‰glide.lockæ–‡ä»¶çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ <code>glide install</code> æ¥å®‰è£…ä¾èµ–åŒ…</li>
</ul>
<hr>
<h1 id="dep"><a href="#dep" class="headerlink" title="dep"></a>dep</h1><h3 id="Macå®‰è£…goä¾èµ–ç®¡ç†å·¥å…·-dep"><a href="#Macå®‰è£…goä¾èµ–ç®¡ç†å·¥å…·-dep" class="headerlink" title="Macå®‰è£…goä¾èµ–ç®¡ç†å·¥å…· dep"></a>Macå®‰è£…goä¾èµ–ç®¡ç†å·¥å…· dep</h3><blockquote>
<p>goç‰ˆæœ¬è¦&gt;=1.9<br>depä½¿ç”¨éœ€è¦fanqiang</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">brew install dep</span><br></pre></td></tr></table></figure>

<p>å®‰è£…å®Œæˆ,depå‘½ä»¤è¾“å‡º</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">Dep is a tool <span class="keyword">for</span> managing dependencies <span class="keyword">for</span> Go projects</span><br><span class="line"></span><br><span class="line">Usage: <span class="string">&quot;dep [command]&quot;</span></span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line"></span><br><span class="line">  init     Set up a new Go project, or migrate an existing one</span><br><span class="line">  status   Report the status of the project<span class="string">&#x27;s dependencies</span></span><br><span class="line"><span class="string">  ensure   Ensure a dependency is safely vendored in the project</span></span><br><span class="line"><span class="string">  version  Show the dep version information</span></span><br><span class="line"><span class="string">  check    Check if imports, Gopkg.toml, and Gopkg.lock are in sync</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Examples:</span></span><br><span class="line"><span class="string">  dep init                               set up a new project</span></span><br><span class="line"><span class="string">  dep ensure                             install the project&#x27;</span>s dependencies</span><br><span class="line">  dep ensure -update                     update the locked versions of all dependencies</span><br><span class="line">  dep ensure -add github.com/pkg/errors  add a dependency to the project</span><br><span class="line"></span><br><span class="line">Use <span class="string">&quot;dep help [command]&quot;</span> <span class="keyword">for</span> more information about a <span class="built_in">command</span>.</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨depå‘½ä»¤å®‰è£…gin"><a href="#ä½¿ç”¨depå‘½ä»¤å®‰è£…gin" class="headerlink" title="ä½¿ç”¨depå‘½ä»¤å®‰è£…gin"></a>ä½¿ç”¨depå‘½ä»¤å®‰è£…gin</h4><blockquote>
<p>åœ¨ GOPATH/src ç›®å½•ä¸­ä½¿ç”¨ dep å‘½ä»¤</p>
</blockquote>
<p>æ–°å»ºä»»æ„ç›®å½•ï¼Œå¹¶åœ¨é‡Œé¢ dep initï¼ŒæˆåŠŸåä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼ˆGopkg.lock Gopkg.tomlï¼‰å’Œä¸€ä¸ªç›®å½•ï¼ˆvendorï¼‰</p>
<p><img src="https://gss0.baidu.com/9rkZbzqaKgQUohGko9WTAnF6hhy/mms-res/voice/choujiang/28968009-f49a4a6a-78eb-11e7-93cf-e695d45488da.14d8c0f3.png" alt="relation"></p>
<ul>
<li>vendor ä¾èµ–åŒ…ä¼šä¸‹è½½åˆ°è¿™é‡Œ</li>
<li>Gopkg.lock æš‚æ—¶ä¸ç”¨ç®¡</li>
<li>Gopkg.toml éœ€è¦çš„ä¾èµ–é…ç½®å†™åœ¨è¿™é‡Œ</li>
</ul>
<p>åœ¨ toml æ–‡ä»¶ä¸­å¢åŠ ä¾èµ–é…ç½®</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line">[[<span class="string">constraint</span>]]</span><br><span class="line">  <span class="string">name</span> <span class="string">=</span> <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">  <span class="string">version</span> <span class="string">=</span> <span class="string">&quot;1.4.0&quot;</span></span><br></pre></td></tr></table></figure>

<p>depæ¸…é™¤ç¼“å­˜<code>rm -rf $GOPATH/pkg/dep/source/</code></p>
<p>ä¹‹åæ‰§è¡Œ dep ensure å‘½ä»¤ï¼Œä¼šåœ¨vendorä¸‹å®‰è£…åŒ…</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/07/25/go-mod%E5%BC%95%E5%85%A5%E5%8C%85/">go-modå¼•å…¥åŒ…</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-07-25T05:19:37.000Z" itemprop="datePublished">
    2021-07-25
  </time>
  
  
</div>

    </header>
    <div>
      
        <blockquote>
<p>æ­¤æ–¹å¼éœ€è¦å°†ä½ çš„GO111MODULEè®¾ç½®æˆon,è¿™æ ·ä½ å°±å¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸‹é¢å¼€å¯ä½ çš„é¡¹ç›®äº†</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">éšä¾¿æ‰¾ä¸ªç›®å½•ä¸‹, æ–°å»ºgodemo</span></span><br><span class="line">mkdir godemo</span><br><span class="line">cd godemo</span><br><span class="line"><span class="meta">#</span><span class="bash">åˆå§‹åŒ–go mod</span></span><br><span class="line">go mod init godemo</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ç›®å½•ä¸‹å°±å‡ºç° <code>go.mod</code> æ–‡ä»¶ï¼Œæ‰“å¼€æŸ¥çœ‹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">module godemo</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.16</span></span><br></pre></td></tr></table></figure>
<hr>
<p>æ–°å»ºæ–‡ä»¶<code>main.go</code>, åœ¨importä¸­å†™å…¥æƒ³è¦å¼•ç”¨çš„åŒ…<br>æˆ‘è¿™é‡Œä½¿ç”¨decimalåŒ…<br>decimalåŒ…åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/shopspring/decimal">https://pkg.go.dev/github.com/shopspring/decimal</a></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/shopspring/decimal&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	price, err := decimal.NewFromString(<span class="string">&quot;136.02&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	quantity := decimal.NewFromInt(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">	fee, _ := decimal.NewFromString(<span class="string">&quot;.035&quot;</span>)</span><br><span class="line">	taxRate, _ := decimal.NewFromString(<span class="string">&quot;.08875&quot;</span>)</span><br><span class="line"></span><br><span class="line">	subtotal := price.Mul(quantity)</span><br><span class="line"></span><br><span class="line">	preTax := subtotal.Mul(fee.Add(decimal.NewFromFloat(<span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line">	total := preTax.Mul(taxRate.Add(decimal.NewFromFloat(<span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;Subtotal:&quot;</span>, subtotal)                      <span class="comment">// Subtotal: 408.06</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Pre-tax:&quot;</span>, preTax)                         <span class="comment">// Pre-tax: 422.3421</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Taxes:&quot;</span>, total.Sub(preTax))                <span class="comment">// Taxes: 37.482861375</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Total:&quot;</span>, total)                            <span class="comment">// Total: 459.824961375</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Tax rate:&quot;</span>, total.Sub(preTax).Div(preTax)) <span class="comment">// Tax rate: 0.08875</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>æ­¤æ—¶è¿è¡Œgo run main.goä¼šæŠ¥é”™</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">main.<span class="keyword">go</span>:<span class="number">5</span>:<span class="number">2</span>: no required module provides <span class="keyword">package</span> github.com/shopspring/decimal; to add it:</span><br><span class="line">	<span class="keyword">go</span> get github.com/shopspring/decimal</span><br></pre></td></tr></table></figure>
<p>æç¤ºä½¿ç”¨  <code>go get github.com/shopspring/decimal</code> å‘½ä»¤ï¼Œä½¿ç”¨ä¼šæ˜¾ç¤ºä¸‹è½½å®Œæˆ<br>å†è¿è¡Œå°±æˆåŠŸ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">go</span> run main.<span class="keyword">go</span></span><br><span class="line"></span><br><span class="line">#è¾“å‡º</span><br><span class="line">Subtotal: <span class="number">408.06</span></span><br><span class="line">Pre-tax: <span class="number">422.3421</span></span><br><span class="line">Taxes: <span class="number">37.482861375</span></span><br><span class="line">Total: <span class="number">459.824961375</span></span><br><span class="line">Tax rate: <span class="number">0.08875</span></span><br></pre></td></tr></table></figure>


      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/07/01/go-study/">goç¯å¢ƒæ­å»ºï¼ˆMacï¼‰</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-06-30T16:22:33.000Z" itemprop="datePublished">
    2021-07-01
  </time>
  
  
</div>

    </header>
    <div>
      
        <h2 id="goç¯å¢ƒæ­å»ºï¼ˆMacï¼‰"><a href="#goç¯å¢ƒæ­å»ºï¼ˆMacï¼‰" class="headerlink" title="goç¯å¢ƒæ­å»ºï¼ˆMacï¼‰"></a>goç¯å¢ƒæ­å»ºï¼ˆMacï¼‰</h2><ol>
<li>ä¸‹è½½pkgæ–‡ä»¶è¿›è¡Œå®‰è£…<br><a target="_blank" rel="noopener" href="https://studygolang.com/dl">goè¯­è¨€ä¸­æ–‡ç½‘ä¸‹è½½åœ°å€</a></li>
<li>è®¾ç½®ç¯å¢ƒå˜é‡<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ç¼–è¾‘.bash_profileæ–‡ä»¶</span><br><span class="line">vim ~/.bash_profile</span><br><span class="line"></span><br><span class="line">#è¿½åŠ å¦‚ä¸‹é…ç½®</span><br><span class="line">export GOROOT=/usr/local/go</span><br><span class="line">#GOPATHæ˜¯è‡ªå·±çš„goé¡¹ç›®è·¯å¾„ï¼Œè‡ªå®šä¹‰è®¾ç½®</span><br><span class="line">export GOPATH=/Users/molin/Documents/go</span><br><span class="line">export GOBIN=$GOROOT/bin</span><br><span class="line">export PATH=$PATH:$GOBIN/usr/local/go</span><br><span class="line"></span><br><span class="line">#ç”Ÿæ•ˆ</span><br><span class="line">source ~/.bash_profile</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹goç¯å¢ƒå˜é‡</span><br><span class="line">go env</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹goç‰ˆæœ¬</span><br><span class="line">go version</span><br></pre></td></tr></table></figure></li>
<li>ä¸ºgoè®¾ç½®å·¥ä½œç›®å½•<br> ç›®å½•å†…æ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«æ˜¯ bin pkg src</li>
</ol>

      
    </div>
</article>

    </li>
  
</ul>

  <section id="nav-wrapper">
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">next Â»</a>
    </nav>
  </section>


            <footer>
    <div>Â© 2021 - å…«ä¸¤ </div>
    <div>
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a target="_blank" rel="noopener" href="https://github.com/nameoverflow/hexo-theme-icalm">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>

<script src="/js/pager/singlepager.js"></script>

<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>