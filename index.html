<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>半斤</title>
  
    <link rel="icon" href="/assets/github.svg">
  
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  
<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">

  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url(/assets/header.png)">
        <div class='av-pic' style="background-image: url(/assets/tree_small.png)">
        </div>
    </section>
    <section class='menu'>
        <div>半斤</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
            <a href="/tags/" class="Btn">
              <li>Tags</li>
            </a>  
          
            <a href="/about/" class="Btn">
              <li>About</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <ul class="Index">
  
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/07/25/go-mod%E5%BC%95%E5%85%A5%E5%8C%85/">go-mod引入包</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-07-25T05:19:37.000Z" itemprop="datePublished">
    2021-07-25
  </time>
  
  
</div>

    </header>
    <div>
      
        <blockquote>
<p>此方式需要将你的GO111MODULE设置成on,这样你就可以在任意目录下面开启你的项目了</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">随便找个目录下, 新建godemo</span></span><br><span class="line">mkdir godemo</span><br><span class="line">cd godemo</span><br><span class="line"><span class="meta">#</span><span class="bash">初始化go mod</span></span><br><span class="line">go mod init godemo</span><br></pre></td></tr></table></figure>

<p>此时目录下就出现 <code>go.mod</code> 文件，打开查看</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">module godemo</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.16</span></span><br></pre></td></tr></table></figure>
<hr>
<p>新建文件<code>main.go</code>, 在import中写入想要引用的包<br>我这里使用decimal包<br>decimal包地址：<a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/shopspring/decimal">https://pkg.go.dev/github.com/shopspring/decimal</a></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/shopspring/decimal&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	price, err := decimal.NewFromString(<span class="string">&quot;136.02&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	quantity := decimal.NewFromInt(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">	fee, _ := decimal.NewFromString(<span class="string">&quot;.035&quot;</span>)</span><br><span class="line">	taxRate, _ := decimal.NewFromString(<span class="string">&quot;.08875&quot;</span>)</span><br><span class="line"></span><br><span class="line">	subtotal := price.Mul(quantity)</span><br><span class="line"></span><br><span class="line">	preTax := subtotal.Mul(fee.Add(decimal.NewFromFloat(<span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line">	total := preTax.Mul(taxRate.Add(decimal.NewFromFloat(<span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;Subtotal:&quot;</span>, subtotal)                      <span class="comment">// Subtotal: 408.06</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Pre-tax:&quot;</span>, preTax)                         <span class="comment">// Pre-tax: 422.3421</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Taxes:&quot;</span>, total.Sub(preTax))                <span class="comment">// Taxes: 37.482861375</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Total:&quot;</span>, total)                            <span class="comment">// Total: 459.824961375</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Tax rate:&quot;</span>, total.Sub(preTax).Div(preTax)) <span class="comment">// Tax rate: 0.08875</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>此时运行go run main.go会报错</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">main.<span class="keyword">go</span>:<span class="number">5</span>:<span class="number">2</span>: no required module provides <span class="keyword">package</span> github.com/shopspring/decimal; to add it:</span><br><span class="line">	<span class="keyword">go</span> get github.com/shopspring/decimal</span><br></pre></td></tr></table></figure>
<p>提示使用  <code>go get github.com/shopspring/decimal</code> 命令，使用会显示下载完成<br>再运行就成功</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">go</span> run main.<span class="keyword">go</span></span><br><span class="line"></span><br><span class="line">#输出</span><br><span class="line">Subtotal: <span class="number">408.06</span></span><br><span class="line">Pre-tax: <span class="number">422.3421</span></span><br><span class="line">Taxes: <span class="number">37.482861375</span></span><br><span class="line">Total: <span class="number">459.824961375</span></span><br><span class="line">Tax rate: <span class="number">0.08875</span></span><br></pre></td></tr></table></figure>


      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/07/01/go-study/">go环境搭建（Mac）</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-06-30T16:22:33.000Z" itemprop="datePublished">
    2021-07-01
  </time>
  
  
</div>

    </header>
    <div>
      
        <h2 id="go环境搭建（Mac）"><a href="#go环境搭建（Mac）" class="headerlink" title="go环境搭建（Mac）"></a>go环境搭建（Mac）</h2><ol>
<li>下载pkg文件进行安装<br><a target="_blank" rel="noopener" href="https://studygolang.com/dl">go语言中文网下载地址</a></li>
<li>设置环境变量<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#编辑.bash_profile文件</span><br><span class="line">vim ~/.bash_profile</span><br><span class="line"></span><br><span class="line">#追加如下配置</span><br><span class="line">export GOROOT=/usr/local/go</span><br><span class="line">#GOPATH是自己的go项目路径，自定义设置</span><br><span class="line">export GOPATH=/Users/molin/Documents/go</span><br><span class="line">export GOBIN=$GOROOT/bin</span><br><span class="line">export PATH=$PATH:$GOBIN/usr/local/go</span><br><span class="line"></span><br><span class="line">#生效</span><br><span class="line">source ~/.bash_profile</span><br><span class="line"></span><br><span class="line">#查看go环境变量</span><br><span class="line">go env</span><br><span class="line"></span><br><span class="line">#查看go版本</span><br><span class="line">go version</span><br></pre></td></tr></table></figure></li>
<li>为go设置工作目录<br> 目录内新建三个文件夹，分别是 bin pkg src</li>
</ol>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/06/26/test-update-message/">brew 安装 PHP 环境</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-06-25T16:45:43.000Z" itemprop="datePublished">
    2021-06-26
  </time>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/favorite/">favorite</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <h2 id="安装brew"><a href="#安装brew" class="headerlink" title="安装brew"></a>安装brew</h2><p><a target="_blank" rel="noopener" href="https://brew.sh/index_zh-cn">brew中文地址</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/90765541">brew常用命令</a></p>
<ul>
<li>brew 安装\卸载软件<br><code>brew install\uninstall XXX</code></li>
<li>brew 查看已安装的软件列表<br><code>brew list</code></li>
<li>brew 查看软件的安装信息<br><code>brew info XXX</code></li>
<li>brew 查看service列表状态<br><code>brew services list</code></li>
</ul>
<h2 id="brew安装nginx"><a href="#brew安装nginx" class="headerlink" title="brew安装nginx"></a>brew安装nginx</h2><p><code>brew search nginx</code><br><code>brew install nginx</code></p>
<ul>
<li>启动nginx<br><code>nginx</code><br>  启动后访问nginx <a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a></li>
<li>关闭nginx服务<br><code>nginx -s stop</code></li>
<li>nginx重启<br><code>nginx -s reload</code></li>
<li>查看nginx版本<br><code>nginx -v</code></li>
<li>nginx.conf修改<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 可以把listen端口改为80</span><br><span class="line">listen       80;</span><br><span class="line"># 解开这个注释</span><br><span class="line">location ~ \.php$ &#123;</span><br><span class="line">    #root           html;</span><br><span class="line">    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">    fastcgi_index  index.php;</span><br><span class="line">    #fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line"></span><br><span class="line">    include        fastcgi_params;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>多站点配置<br>新建sites目录，*.conf都在这里<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># nginx.conf倒数第二行</span><br><span class="line">include sites/*.conf</span><br><span class="line"></span><br><span class="line"># *.conf 模板</span><br><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  XXXX.com;</span><br><span class="line">    root         /Users/XXXX/wwwroot/blog/public;</span><br><span class="line">    index  index.html index.htm index.php;</span><br><span class="line">    add_header Access-Control-Allow-Origin *;</span><br><span class="line">    add_header Access-Control-Allow-Credentials &quot;true&quot;;</span><br><span class="line">    add_header Access-Control-Allow-Methods &quot;GET,POST&quot;;</span><br><span class="line">    add_header Access-Control-Allow-Headers &quot;Origin,No-Cache,X-Requested-With,If-Modified-Since,Pragma,Last-Modified,Cache-Control,Expires,Content-Type,X-E4M-With&quot;;</span><br><span class="line">    location / &#123;</span><br><span class="line">        try_files $uri $uri/ /index.php?$query_string;</span><br><span class="line">    &#125;</span><br><span class="line">    location ~ \.php$ &#123;</span><br><span class="line">          fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">          fastcgi_index  index.php;</span><br><span class="line">          fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line">          include        fastcgi_params;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="brew安装php"><a href="#brew安装php" class="headerlink" title="brew安装php"></a>brew安装php</h3><p><code>brew search php</code><br><code>brew install php@7.3</code></p>
<ul>
<li>安装PHP扩展<br>使用pecl安装<ul>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/113042273">pecl安装教程</a><br>tips: 此处若安装好命令不能用可能需要设置环境变量</li>
<li>编译安装<br>下载源码包；phpize；.configure；make &amp;&amp; make install；在php.ini文件中添加扩展配置，重启php-fpm</li>
</ul>
</li>
<li>切换PHP版本</li>
</ul>
<h3 id="brew安装mysql"><a href="#brew安装mysql" class="headerlink" title="brew安装mysql"></a>brew安装mysql</h3><p><code>brew search php</code><br><code>brew install php@7.3</code></p>
<ul>
<li>安装完毕后设置数据库密码<br><code>mysql_secure_installation</code></li>
<li>开启msyql服务<br><code>mysql.server start</code></li>
<li>重启mysql服务<br><code>mysql.server restart</code></li>
<li>关闭mysql服务<br><code>mysql.server stop</code></li>
</ul>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/06/25/hello-world/">Hello World</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-06-25T15:23:50.743Z" itemprop="datePublished">
    2021-06-25
  </time>
  
  
</div>

    </header>
    <div>
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
      <div class='ListMeta'>
  <time datetime="2021-06-25T15:18:48.494Z" itemprop="datePublished">
    2021-06-25
  </time>
  
  
</div>

    </header>
    <div>
      
        <h1 id="hangxingfu-github-io"><a href="#hangxingfu-github-io" class="headerlink" title="hangxingfu.github.io"></a>hangxingfu.github.io</h1>
      
    </div>
</article>

    </li>
  
</ul>


            <footer>
    <div>© 2021 - 八两 </div>
    <div>
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a target="_blank" rel="noopener" href="https://github.com/nameoverflow/hexo-theme-icalm">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>

<script src="/js/pager/singlepager.js"></script>

<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>